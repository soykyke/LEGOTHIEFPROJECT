import static com.googlecode.javacv.cpp.opencv_core.cvFlip;

import java.awt.Graphics;

import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.VideoInputFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
import javax.swing.*;

public class GrabberShow extends JPanel implements Runnable {
	//final int INTERVAL=1000;///you may use interval
	IplImage image;
	JPanel panel;
	CanvasFrame canvas = new CanvasFrame("Web Cam");
	IplImage img;
	
	public GrabberShow(JPanel p) {
		panel = p;
		canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
	}
	
	@Override
	public void run() {
		FrameGrabber grabber = new VideoInputFrameGrabber(2); // 1 for next camera
		int i=0;
		try {
			grabber.start();
			
			panel.add(canvas.getContentPane());

			while (true) {
				img = grabber.grab();
				if (img != null) {
					//cvFlip(img, img, 1);// l-r = 90_degrees_steps_anti_clockwise
							// show image on window
					//canvas.showImage(img);
					this.repaint();
				}
				//Thread.sleep(INTERVAL);
			}
		} catch (Exception e) {
		}
	}

	@Override
	protected void paintComponent(Graphics g) {
		g.drawImage(img, 0, 0, 320, 240, null);
}
	
	
}


